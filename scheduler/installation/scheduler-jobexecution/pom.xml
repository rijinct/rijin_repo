<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:xsi="http://www.w3.org/2001/XML-Schema-instance"
	xmlns="http://maven.apache.org/POM/4.0"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>com.project.rithomas.scheduler</groupId>
		<artifactId>scheduler-installation</artifactId>
		<version>1.0-SNAPSHOT</version>
		<relativePath>..</relativePath>
	</parent>
	<groupId>com.project.rithomas.packages.scheduler</groupId>
	<artifactId>PROJECT-RITHOMAS-scheduler</artifactId>
	<packaging>pom</packaging>
	<version>1.0-SNAPSHOT</version>
	<url>http://www.rijinsiemeprojectetworks.com/</url>
	<properties>
		<scheduler_HOME>/opt/project/rithomas/scheduler/app</scheduler_HOME>		
	</properties>
	<dependencies>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-common${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-aggregation${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-archiving${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-project${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-entity${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-export${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-reaggregation${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-tnp${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-usage${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-script${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.project.rithomas.jobexecution</groupId>
			<artifactId>scheduler-jobexecution-cei${artifactClassifier}</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.rijin.analytics.handler</groupId>
			<artifactId>analytics-base-exceptionhandler</artifactId>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.rijin.analytics.loginterface</groupId>
			<artifactId>analytics-log-adapter</artifactId>
			<type>jar</type>
		</dependency>
		<dependency>
			<groupId>com.rijin.ca4ci.crypto</groupId>
			<artifactId>crypto-utility</artifactId>
			<type>jar</type>
		</dependency>
	</dependencies>
	<profiles>
		<profile>
			<id>rpm-build</id>
			<activation>
				<property>
					<name>!container</name>
				</property>
			</activation>
			<build>
				<directory>${rpm.target.directory}/${project.artifactId}</directory>
				<finalName>${project.artifactId}-${project.version}</finalName>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-dependency-plugin</artifactId>
						<version>3.1.0</version>
						<executions>
							<execution>
								<id>copy-dependencies</id>
								<phase>package</phase>
								<goals>
									<goal>copy-dependencies</goal>
								</goals>
								<configuration>
									<excludeGroupIds>com.project.rithomas.scheduler,com.project.rithomas.sdk,com.project.rithomas.adapter,com.project.rithomas.jobexecution</excludeGroupIds>
									<excludeArtifactIds>slf4j-log4j12,sdk-core-definitions,sdk-deployer-adddb${artifactClassifier},sdk-core-entities-workflow${artifactClassifier},sdk-core-deployer-workflow${artifactClassifier},etl-service${artifactClassifier},etl-common${artifactClassifier},etl-dimension-loading${artifactClassifier},scheduler-jobexecution-usage${artifactClassifier},scheduler-jobexecution-script${artifactClassifier},scheduler-jobexecution-tnp${artifactClassifier},scheduler-jobexecution-reaggregation${artifactClassifier},scheduler-jobexecution-export${artifactClassifier},scheduler-jobexecution-entity${artifactClassifier},scheduler-jobexecution-project${artifactClassifier},scheduler-jobexecution-archiving${artifactClassifier},scheduler-jobexecution-aggregation${artifactClassifier},scheduler-jobexecution-quartz${artifactClassifier},scheduler-jobexecution-common${artifactClassifier},scheduler-quartz-client${artifactClassifier},scheduler-common-client${artifactClassifier},rithomas-formulae${artifactClassifier},rithomas-cryptography${artifactClassifier},cache-db-handler${artifactClassifier},hive-io-impl${artifactClassifier},hive-io-api${artifactClassifier},couchbase-cache-server-plugin${artifactClassifier},cache-client${artifactClassifier},cache-core${artifactClassifier},db-con-manager${artifactClassifier},scheduler-quartz-client${artifactClassifier},scheduler-quartz-endpoint${artifactClassifier},cacheservice-agent-client${artifactClassifier},HiveToHBaseLoader${artifactClassifier},mchange-commons-java,analytics-base-exceptionhandler,analytics-log-adapter,log4j-to-slf4j,logback-classic,logback-core,query-scheduler-handler-client${artifactClassifier},crypto-utility,commons-lang,dimensionfilevalidator-core,dimensionfilevalidator-client</excludeArtifactIds>
									<outputDirectory>${rpm.target.directory}/${project.artifactId}/3rdparty</outputDirectory>
									<overWriteReleases>false</overWriteReleases>
									<overWriteSnapshots>false</overWriteSnapshots>
									<overWriteIfNewer>true</overWriteIfNewer>
									<includeScope>compile</includeScope>
								</configuration>
							</execution>
							<execution>
								<id>copy-bundle</id>
								<phase>package</phase>
								<goals>
									<goal>copy</goal>
								</goals>
								<configuration>
									<artifactItems>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-common${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-aggregation${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-archiving${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-project${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-entity${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-export${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-reaggregation${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-tnp${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-usage${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-script${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.jobexecution</groupId>
											<artifactId>scheduler-jobexecution-cei${artifactClassifier}</artifactId>
											<version>${project.version}</version>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.sdk</groupId>
											<artifactId>sdk-deployer-adddb${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.etl</groupId>
											<artifactId>etl-dimension-loading${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.etl</groupId>
											<artifactId>etl-service${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.common</groupId>
											<artifactId>rithomas-formulae${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.common</groupId>
											<artifactId>rithomas-cryptography${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.cache-service</groupId>
											<artifactId>couchbase-cache-server-plugin${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.cache-service</groupId>
											<artifactId>cache-core${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.rijin.analytics.ca4ci.cacheservice</groupId>
											<artifactId>cacheservice-agent-client${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.cache-service</groupId>
											<artifactId>cache-client${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.common</groupId>
											<artifactId>hive-io-api${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.common</groupId>
											<artifactId>hive-io-impl${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.rijin.analytics.handler</groupId>
											<artifactId>analytics-base-exceptionhandler</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>			
										<artifactItem>
											<groupId>com.rijin.analytics.loginterface</groupId>
											<artifactId>analytics-log-adapter</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.project.rithomas.query.scheduler</groupId>
											<artifactId>query-scheduler-handler-client${artifactClassifier}</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>										
										<artifactItem>
											<groupId>com.rijin.ca4ci.crypto</groupId>
											<artifactId>crypto-utility</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.rijin.dimensionfilevalidator</groupId>
											<artifactId>dimensionfilevalidator-client</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
										<artifactItem>
											<groupId>com.rijin.dimensionfilevalidator.core</groupId>
											<artifactId>dimensionfilevalidator-core</artifactId>
											<type>jar</type>
											<overWrite>true</overWrite>
										</artifactItem>
									</artifactItems>
									<outputDirectory>${rpm.target.directory}/${project.artifactId}/lib</outputDirectory>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>rpm-maven-plugin</artifactId>
						<executions>
							<execution>
								<phase>package</phase>
								<goals>
									<goal>rpm</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
							<release>${rpm.release}</release>
							<distribution>RITHOMAS</distribution>
							<autoRequires>false</autoRequires>
							<group>Development/Debugger</group>
							<mappings>
								<mapping>
									<filemode>555</filemode>
									<username>rithomas</username>
									<groupname>ninstall</groupname>
									<directory>${scheduler_HOME}/lib</directory>
									<dependency>
										<includes>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-common${artifactClassifier}:${project.version}</include>										
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-aggregation${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-archiving${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-project${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-entity${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-export${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-reaggregation${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-tnp${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-usage${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-script${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.jobexecution:scheduler-jobexecution-cei${artifactClassifier}:${project.version}</include>
											<include>com.project.rithomas.sdk:sdk-deployer-adddb${artifactClassifier}</include>
											<include>com.project.rithomas.etl:etl-dimension-loading${artifactClassifier}</include>
											<include>com.project.rithomas.etl:etl-service${artifactClassifier}</include>
											<include>com.project.rithomas.etl:etl-common${artifactClassifier}</include>
											<include>com.project.rithomas.etl:etl-topology-starter${artifactClassifier}</include>
											<include>com.project.rithomas.etl:etl-core${artifactClassifier}</include>
											<include>com.project.rithomas.common:rithomas-formulae${artifactClassifier}</include>
											<include>com.project.rithomas.common:rithomas-cryptography${artifactClassifier}</include>
											<include>com.project.rithomas.cache-service:couchbase-cache-server-plugin${artifactClassifier}</include>
											<include>com.project.rithomas.cache-service:cache-core${artifactClassifier}</include>
											<include>com.project.rithomas.cache-service:cache-client${artifactClassifier}</include>
											<include>com.rijin.analytics.ca4ci.cacheservice:cacheservice-agent-client${artifactClassifier}</include>
											<include>com.project.rithomas.common:hive-io-api${artifactClassifier}</include>
											<include>com.project.rithomas.common:hive-io-impl${artifactClassifier}</include>
											<include>com.project.rithomas:HiveToHBaseLoader${artifactClassifier}</include>
											<include>com.rijin.dimensionfilevalidator.core:dimensionfilevalidator-core</include>
											<include>com.rijin.dimensionfilevalidator:dimensionfilevalidator-client</include>
											<include>com.rijin.analytics.handler:analytics-base-exceptionhandler</include>
											<include>com.rijin.analytics.loginterface:analytics-log-adapter</include>
											<include>com.project.rithomas.query.scheduler:query-scheduler-handler-client${artifactClassifier}</include>
											<include>com.rijin.ca4ci.crypto:crypto-utility</include>
										</includes>
									</dependency>
								</mapping>
								<mapping>
									<filemode>555</filemode>
									<username>rithomas</username>
									<groupname>ninstall</groupname>
									<directory>${scheduler_HOME}/lib/3rdparty/</directory>
									<directoryIncluded>false</directoryIncluded>
									<sources>
										<source>
											<location>${rpm.target.directory}/${project.artifactId}/3rdparty</location>
										</source>
									</sources>
								</mapping>
								<mapping>
									<filemode>775</filemode>
									<username>rithomas</username>
									<groupname>ninstall</groupname>
									<directory>${scheduler_HOME}/conf</directory>
									<directoryIncluded>false</directoryIncluded>
									<sources>
										<source>
											<location>${rpm.target.directory}/${project.artifactId}/conf</location>
										</source>
									</sources>
								</mapping>
								<mapping>
									<filemode>550</filemode>
									<username>rithomas</username>
									<groupname>ninstall</groupname>
									<directory>${scheduler_HOME}/bin</directory>
									<directoryIncluded>false</directoryIncluded>
									<sources>
										<source>
											<location>${rpm.target.directory}/${project.artifactId}/scripts</location>
										</source>
									</sources>
								</mapping>
							</mappings>
							<preinstallScript>pre-install.sh</preinstallScript>
							<postinstallScript>post-install.sh</postinstallScript>
							<preremoveScript>pre-uninstall.sh</preremoveScript>
							<postremoveScript>post-uninstall.sh</postremoveScript>
						</configuration>
					</plugin>
					<plugin>
						<artifactId>maven-resources-plugin</artifactId>
						<executions>
							<execution>
								<id>create-package-conf</id>
								<phase>prepare-package</phase>
								<goals>
									<goal>copy-resources</goal>
								</goals>
								<configuration>
									<outputDirectory>${rpm.target.directory}/${project.artifactId}/conf</outputDirectory>
									<overwrite>true</overwrite>
									<resources>
										<resource>
											<directory>conf</directory>
											<excludes>
												<exclude>hive_settings.xml</exclude>
												<exclude>spark_settings.xml</exclude>
												<exclude>CEM_FV_File_Details_Config.xml</exclude>
											</excludes>
										</resource>
									</resources>
								</configuration>
							</execution>
							<execution>
								<id>create-package-scripts</id>
								<phase>prepare-package</phase>
								<goals>
									<goal>copy-resources</goal>
								</goals>
								<configuration>
									<outputDirectory>${rpm.target.directory}/${project.artifactId}/scripts</outputDirectory>
									<overwrite>true</overwrite>
									<resources>
										<resource>
											<directory>scripts</directory>
										</resource>
									</resources>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>
</project>
