{
  "collections": [
    "map_Visit_nature_play_wa",
    "Visit"
  ],
  "additionalCollections": [ ],
  "permissions": "data-hub-common,read,data-hub-common,update,origins-user-role,read",
  "batchSize": 100,
  "validateEntity": "doNotValidate",
  "targetFormat": "JSON",
  "attachSourceDocument": "true",
  "sourceRecordScope": "instanceOnly",
  "name": "map_Visit_nature_play_wa",
  "targetEntityType": "http://example.org/Visit-1.0.0/Visit",
  "description": "",
  "collection": "origins_adult_consent_form",
  "selectedSource": "collection",
  "sourceQuery": "cts.collectionQuery(['nature_play_wa'])",
  "targetDatabase": "data-hub-FINAL",
  "headers": { },
  "interceptors": [ ],
  "provenanceGranularityLevel": "off",
  "customHook": { },
  "sourceDatabase": "data-hub-STAGING",
  "stepDefinitionName": "entity-services-mapping",
  "stepDefinitionType": "mapping",
  "stepId": "map_Visit_nature_play_wa-mapping",
  "acceptsBatch": "true",
  "lastUpdated": "2022-03-09T16:44:43.388638+08:00",
  "uriExpression": "hubURI('Visit')",
  "properties": {
    "participantID": {
      "sourcedFrom": "patternMatch(string(data(.)),'opn|ouid_opn|Pregnancy Number','opn')"
    },
    "visit_details": {
      "sourcedFrom": "/",
      "properties": {
        "visitID": {
          "sourcedFrom": "generate-id()"
        },
        "visitDate": {
          "sourcedFrom": "parseDate(load_date,\"YYYY/MM/DD\")"
        },
        "visitStatus": {
          "sourcedFrom": "patternMatch(string(data(.)),'complete','Default')"
        },
        "visitName": {
          "sourcedFrom": "'nature_play_wa'"
        },
        "visitCategory": {
          "sourcedFrom": "'Environment'"
        },
        "visitClass": {
          "sourcedFrom": "'postnatal'"
        },
        "source_document": {
          "sourcedFrom": "$URI"
        },
        "data": {
          "sourcedFrom": "string(data(.))"
        },
        "visitTimepoint": {
          "sourcedFrom": "timepoinFormat(patternMatch(string(data(.)),'event','Default'),'year|week|month|day')"
        },
        "source": {
          "sourcedFrom": "source"
        }
      },
      "targetEntityType": "#/definitions/vdetails"
    }
  },
  "namespaces": { }
}